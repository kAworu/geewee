!!!
%html{ :xmlns => 'http://www.w3.org/1999/xhtml' }

  %head
    %meta{ :content => 'text/html; charset=UTF-8', 'http-equiv' => 'Content-Type' }
    %title
      fork while fork
      - if html_title
        =h ": #{html_title}"

    = stylesheet_link_tag 'application'
    = javascript_include_tag :all
    = auto_discovery_link_tag :atom, posts_path(:atom)
    = yield :head

  %body
    #container
      <!-- start header -->
      #header
        %h1
          %span= link_to 'fork while fork', root_url
        %h2 :(){:|:&amp;};:
      <!-- end header -->

      <!-- start body -->
      #page
        #content
          = yield

        <!-- start sidebar -->
        #sidebar
          <!-- Atom feed link -->
          %p
            = image_tag '/images/feed-icon16x16.png'
            = link_to 'Abonne toi à mon beau flux Atom <3', posts_path(:atom)

          <!-- static Pages -->
          %h3= link_to h('Pages'), '#'
          %ul
            - Page.all.each do |page|
              %li= link_to h(page.title), page

          <!-- archives by Author -->
          %h3= link_to 'Auteurs', archives_by_author_path
          %ul
            - Author.find(:all).each do |author|
              %li
                = link_to h(author.name), archives_by_author_path(author)
                %em= "(#{author.posts.published.count})"
          <!-- archives by Category -->
          %h3= link_to 'Catégories', archives_by_category_path
          %ul
            - Category.all.sort_by { |c| -(c.posts.published.count) }.each do |category|
              %li
                = link_to h(category.display_name), archives_by_category_path(category)
                %em= "(#{category.posts.published.count})"
          <!-- archives by Tag -->
          %h3= link_to 'Mots-clefs', archives_by_tag_path
          %p#tag-cloud{ :style => 'overflow:hidden' }
            - tag_cloud Post.tag_counts, %w[tag1 tag2 tag3 tag4 tag5 tag6 tag7 tag8 tag9] do |tag, css_class|
              = link_to h(tag.name), archives_by_tag_path(tag.name), :class => css_class

          <!-- archives by month and year -->
          %h3= link_to 'Archives', :controller => :archives, :action => :by_month
          %ul
            - Post.all.group_by(&:month_of_the_year).each do |month, posts|
              %li
                - d = posts.first.created_at
                = link_to h(month), archives_by_month_path(d.year, d.month)
                %em= "(#{posts.size})"
        %br{ :style => 'clear:both' }
      <!-- end sidebar -->
      <!-- end body -->

      <!-- start footer -->
      #footer
        %hr
          %p
            = link_to 'fork while fork', root_url
          %ul
            %li
              Propulsé par:
              %a{ :href => 'http://hg.kaworu.ch/rails-geewee' } geewee
              \/ Design:
              %a{ :href => 'http://quotedprintable.com/pages/scribbish' } scribbish
      <!-- end footer -->
